sap.ui.define(["sap/ui/core/message/Message","sap/ui/core/MessageType","sap/ui/core/ValueState"],function(e,t,a){"use strict";var i=function(){this._isValid=true;this._isValidationPerformed=false;this._aPossibleAggregations=["items","content","form","formContainers","formElements","fields","sections","subSections","_grid","cells","_page"];this._aValidateProperties=["value","selectedKey","text"]};i.prototype.isValid=function(){return this._isValidationPerformed&&this._isValid};i.prototype.validate=function(e){this._isValid=true;sap.ui.getCore().getMessageManager().removeAllMessages();this._validate(e);return this.isValid()};i.prototype.clearValueState=function(e){if(!e)return;if(e.setValueState)e.setValueState(a.None);this._recursiveCall(e,this.clearValueState)};i.prototype._validate=function(e){var t,i=true,r=true;if(!((e instanceof sap.ui.core.Control||e instanceof sap.ui.layout.form.FormContainer||e instanceof sap.ui.layout.form.FormElement||e instanceof sap.m.IconTabFilter)&&e.getVisible())){return}if(e.getRequired&&e.getRequired()===true&&e.getEnabled&&e.getEnabled()===true){r=this._validateRequired(e)}else if((t=this._hasType(e))!==-1&&e.getEnabled&&e.getEnabled()===true){r=this._validateConstraint(e,t)}else if(e.getValueState&&e.getValueState()===a.Error){r=false;this._setValueState(e,a.Error,"Bitte füllen Sie dieses Mussfeld")}else{i=false}if(!r){this._isValid=false;this._addMessage(e)}if(!i){this._recursiveCall(e,this._validate)}this._isValidationPerformed=true};i.prototype._validateRequired=function(e){var t=true;for(var i=0;i<this._aValidateProperties.length;i+=1){try{e.getBinding(this._aValidateProperties[i]);var r=e.getProperty(this._aValidateProperties[i]);if(!r||r===""){this._setValueState(e,a.Error,"Bitte füllen Sie dieses Mussfeld");t=false}else if(e.getAggregation("picker")&&e.getProperty("selectedKey").length===0){this._setValueState(e,a.Error,"Bitte wählen Sie einen Eintrag aus der Liste");t=false}else{e.setValueState(a.None);t=true;break}}catch(e){}}return t};i.prototype._validateConstraint=function(e,t){var i=true;try{var r=e.getProperty("editable")}catch(e){r=true}if(r){try{var s=e.getBinding(this._aValidateProperties[t]);var n=e.getProperty(this._aValidateProperties[t]);var o=s.getType().parseValue(n,s.sInternalType);s.getType().validateValue(o);e.setValueState(a.None)}catch(t){i=false;this._setValueState(e,a.Error,t.message)}}return i};i.prototype._addMessage=function(a,i){var r,s=t.Error;if(i===undefined)i="Wrong input";switch(a.getMetadata().getName()){case"sap.m.CheckBox":case"sap.m.Input":case"sap.m.Select":r=a.getParent().getLabel().getText();break}if(a.getValueState)s=this._convertValueStateToMessageType(a.getValueState());sap.ui.getCore().getMessageManager().addMessages(new e({message:a.getValueStateText?a.getValueStateText():i,type:s,additionalText:r}))};i.prototype._hasType=function(e){for(var t=0;t<this._aValidateProperties.length;t+=1){if(e.getBinding(this._aValidateProperties[t])&&e.getBinding(this._aValidateProperties[t]).getType())return t}return-1};i.prototype._setValueState=function(e,t,a){e.setValueState(t);if(e.getValueStateText&&!e.getValueStateText())e.setValueStateText(a)};i.prototype._recursiveCall=function(e,t){for(var a=0;a<this._aPossibleAggregations.length;a+=1){var i=e.getAggregation(this._aPossibleAggregations[a]);if(!i)continue;if(i instanceof Array){for(var r=0;r<i.length;r+=1){t.call(this,i[r])}}else{t.call(this,i)}}};i.prototype._convertValueStateToMessageType=function(e){var i;switch(e){case a.Error:i=t.Error;break;case a.Information:i=t.Information;break;case a.None:i=t.None;break;case a.Success:i=t.Success;break;case a.Warning:i=t.Warning;break;default:i=t.Error}return i};return i});